<!DOCTYPE html> <meta charset=utf-8  /> <meta name=viewport  content="width=device-width, initial-scale=1.0" /><meta name=generator  content="Docutils 0.17.1: http://docutils.sourceforge.net/" /> <meta name=viewport  content="width=device-width,initial-scale=1"> <meta http-equiv=x-ua-compatible  content="ie=edge"> <meta name="lang:clipboard.copy" content="Copy to clipboard"> <meta name="lang:clipboard.copied" content="Copied to clipboard"> <meta name="lang:search.language" content=en > <meta name="lang:search.pipeline.stopwords" content=True > <meta name="lang:search.pipeline.trimmer" content=True > <meta name="lang:search.result.none" content="No matching documents"> <meta name="lang:search.result.one" content="1 matching document"> <meta name="lang:search.result.other" content="# matching documents"> <meta name="lang:search.tokenizer" content="[\s\-]+"> <link href="https://fonts.gstatic.com/" rel=preconnect  crossorigin> <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel=stylesheet > <style> body, input { font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif } code, kbd, pre { font-family: "Roboto Mono", "Courier New", Courier, monospace } </style> <link rel=stylesheet  href="../../_static/stylesheets/application.css"/> <link rel=stylesheet  href="../../_static/stylesheets/application-palette.css"/> <link rel=stylesheet  href="../../_static/stylesheets/application-fixes.css"/> <link rel=stylesheet  href="../../_static/fonts/material-icons.css"/> <meta name=theme-color  content="#2196f3"> <script src="../../_static/javascripts/modernizr.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-XX133829453-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-XX133829453-1'); </script> <title>Modifying Subsets of Vectors &#8212; Practical Data Science</title> <link rel=stylesheet  type="text/css" href="../../_static/pygments.css" /> <link rel=stylesheet  type="text/css" href="../../_static/material.css" /> <script data-url_root="../../" id=documentation_options  src="../../_static/documentation_options.js"></script> <script src="../../_static/jquery.js"></script> <script src="../../_static/underscore.js"></script> <script src="../../_static/doctools.js"></script> <script crossorigin=anonymous  integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script> <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script> <script defer=defer  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> <link rel="shortcut icon" href="../../_static/mids_logo.svg"/> <link rel=index  title=Index  href="../../genindex.html" /> <link rel=search  title=Search  href="../../search.html" /> <body dir=ltr data-md-color-primary=blue-grey data-md-color-accent=blue> <svg class=md-svg > <defs data-children-count=0 > <svg xmlns="http://www.w3.org/2000/svg" width=416  height=448  viewBox="0 0 416 448" id=__github ><path fill=currentColor  d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle  data-md-toggle=drawer  type=checkbox  id=__drawer > <input class=md-toggle  data-md-toggle=search  type=checkbox  id=__search > <label class=md-overlay  data-md-component=overlay  for=__drawer ></label> <a href="#30_numpy/10_vectors/35_modifying_subsets_of_vectors" tabindex=1  class=md-skip > Skip to content </a> <header class=md-header  data-md-component=header > <nav class="md-header-nav md-grid"> <div class="md-flex navheader"> <div class="md-flex__cell md-flex__cell--shrink"> <a href="../../index.html" title="Practical Data Science" class="md-header-nav__button md-logo"> <img src="../../_static/mids_logo.svg" height=26  alt="Practical Data Science logo"> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer ></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title > <span class=md-header-nav__topic >Practical Data Science</span> <span class=md-header-nav__topic > Modifying Subsets of Vectors </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search ></label> <div class=md-search  data-md-component=search  role=dialog > <label class=md-search__overlay  for=__search ></label> <div class=md-search__inner  role=search > <form class=md-search__form  action="../../search.html" method=get  name=search > <input type=text  class=md-search__input  name=q  placeholder=Search  autocapitalize=off  autocomplete=off  spellcheck=false  data-md-component=query  data-md-state=active > <label class="md-icon md-search__icon" for=__search ></label> <button type=reset  class="md-icon md-search__icon" data-md-component=reset  tabindex=-1 > &#xE5CD; </button> </form> <div class=md-search__output > <div class=md-search__scrollwrap  data-md-scrollfix> <div class=md-search-result  data-md-component=result > <div class=md-search-result__meta > Type to start searching </div> <ol class=md-search-result__list ></ol> </div> </div> </div> </div> </div> </div> <script src="../../_static/javascripts/version_dropdown.js"></script> <script> var json_loc = "../../"versions.json"", target_loc = "../../../", text = "Versions"; $( document ).ready( add_version_dropdown(json_loc, target_loc, text)); </script> </div> </nav> </header> <div class=md-container > <nav class=md-tabs  data-md-component=tabs > <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list > <li class=md-tabs__item ><a href="../../index.html" class=md-tabs__link >Home</a> <li class=md-tabs__item ><a href="../../class_schedule.html" class=md-tabs__link >Class Schedule</a> <li class=md-tabs__item ><a href="../../topic_list.html" class=md-tabs__link >Topic List</a> <li class=md-tabs__item ><a href="https://www.nickeubank.com" class=md-tabs__link >About The Author</a> </ul> </div> </nav> <main class=md-main > <div class="md-main__inner md-grid" data-md-component=container > <div class="md-sidebar md-sidebar--primary" data-md-component=navigation > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--primary" data-md-level=0 > <label class="md-nav__title md-nav__title--site" for=__drawer > <a href="../../index.html" title="Practical Data Science" class="md-nav__button md-logo"> <img src="../../_static/mids_logo.svg" alt=" logo" width=48  height=48 > </a> <a href="../../index.html" title="Practical Data Science">Practical Data Science</a> </label> <ul class=md-nav__list > <li class=md-nav__item > <a href="../../class_schedule.html" class=md-nav__link >Class Schedule</a> <li class=md-nav__item > <a href="../../autograder_guidelines.html" class=md-nav__link >Autograder Guidelines</a> <li class=md-nav__item > <a href="../../not_a_mids_student.html" class=md-nav__link >Not a MIDS Student?</a> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--secondary"> <label class=md-nav__title  for=__toc >Contents</label> <ul class=md-nav__list  data-md-scrollfix=""> <li class=md-nav__item ><a href="#30-numpy-10-vectors-35-modifying-subsets-of-vectors--page-root" class=md-nav__link >Modifying Subsets of Vectors</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Modifying-Vectors-and-Data-Types" class=md-nav__link >Modifying Vectors and Data Types</a> <li class=md-nav__item ><a href="#Exercises" class=md-nav__link >Exercises</a> </ul> </nav> </ul> </nav> </div> </div> </div> <div class=md-content > <article class="md-content__inner md-typeset" role=main > <style> /* CSS for nbsphinx extension */ /* remove conflicting styling from Sphinx themes */ div.nbinput.container div.prompt *, div.nboutput.container div.prompt *, div.nbinput.container div.input_area pre, div.nboutput.container div.output_area pre, div.nbinput.container div.input_area .highlight, div.nboutput.container div.output_area .highlight { border: none; padding: 0; margin: 0; box-shadow: none; } div.nbinput.container > div[class*=highlight], div.nboutput.container > div[class*=highlight] { margin: 0; } div.nbinput.container div.prompt *, div.nboutput.container div.prompt * { background: none; } div.nboutput.container div.output_area .highlight, div.nboutput.container div.output_area pre { background: unset; } div.nboutput.container div.output_area div.highlight { color: unset; /* override Pygments text color */ } /* avoid gaps between output lines */ div.nboutput.container div[class*=highlight] pre { line-height: normal; } /* input/output containers */ div.nbinput.container, div.nboutput.container { display: -webkit-flex; display: flex; align-items: flex-start; margin: 0; width: 100%; } @media (max-width: 540px) { div.nbinput.container, div.nboutput.container { flex-direction: column; } } /* input container */ div.nbinput.container { padding-top: 5px; } /* last container */ div.nblast.container { padding-bottom: 5px; } /* input prompt */ div.nbinput.container div.prompt pre { color: #307FC1; } /* output prompt */ div.nboutput.container div.prompt pre { color: #BF5B3D; } /* all prompts */ div.nbinput.container div.prompt, div.nboutput.container div.prompt { width: 4.5ex; padding-top: 5px; position: relative; user-select: none; } div.nbinput.container div.prompt > div, div.nboutput.container div.prompt > div { position: absolute; right: 0; margin-right: 0.3ex; } @media (max-width: 540px) { div.nbinput.container div.prompt, div.nboutput.container div.prompt { width: unset; text-align: left; padding: 0.4em; } div.nboutput.container div.prompt.empty { padding: 0; } div.nbinput.container div.prompt > div, div.nboutput.container div.prompt > div { position: unset; } } /* disable scrollbars on prompts */ div.nbinput.container div.prompt pre, div.nboutput.container div.prompt pre { overflow: hidden; } /* input/output area */ div.nbinput.container div.input_area, div.nboutput.container div.output_area { -webkit-flex: 1; flex: 1; overflow: auto; } @media (max-width: 540px) { div.nbinput.container div.input_area, div.nboutput.container div.output_area { width: 100%; } } /* input area */ div.nbinput.container div.input_area { border: 1px solid #e0e0e0; border-radius: 2px; /*background: #f5f5f5;*/ } /* override MathJax center alignment in output cells */ div.nboutput.container div[class*=MathJax] { text-align: left !important; } /* override sphinx.ext.imgmath center alignment in output cells */ div.nboutput.container div.math p { text-align: left; } /* standard error */ div.nboutput.container div.output_area.stderr { background: #fdd; } /* ANSI colors */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-default-inverse-fg { color: #FFFFFF; } .ansi-default-inverse-bg { background-color: #000000; } .ansi-bold { font-weight: bold; } .ansi-underline { text-decoration: underline; } div.nbinput.container div.input_area div[class*=highlight] > pre, div.nboutput.container div.output_area div[class*=highlight] > pre, div.nboutput.container div.output_area div[class*=highlight].math, div.nboutput.container div.output_area.rendered_html, div.nboutput.container div.output_area > div.output_javascript, div.nboutput.container div.output_area:not(.rendered_html) > img{ padding: 5px; margin: 0; } /* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */ div.nbinput.container div.input_area > div[class^='highlight'], div.nboutput.container div.output_area > div[class^='highlight']{ overflow-y: hidden; } /* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */ .prompt .copybtn { display: none; } /* Some additional styling taken form the Jupyter notebook CSS */ .jp-RenderedHTMLCommon table, div.rendered_html table { border: none; border-collapse: collapse; border-spacing: 0; color: black; font-size: 12px; table-layout: fixed; } .jp-RenderedHTMLCommon thead, div.rendered_html thead { border-bottom: 1px solid black; vertical-align: bottom; } .jp-RenderedHTMLCommon tr, .jp-RenderedHTMLCommon th, .jp-RenderedHTMLCommon td, div.rendered_html tr, div.rendered_html th, div.rendered_html td { text-align: right; vertical-align: middle; padding: 0.5em 0.5em; line-height: normal; white-space: normal; max-width: none; border: none; } .jp-RenderedHTMLCommon th, div.rendered_html th { font-weight: bold; } .jp-RenderedHTMLCommon tbody tr:nth-child(odd), div.rendered_html tbody tr:nth-child(odd) { background: #f5f5f5; } .jp-RenderedHTMLCommon tbody tr:hover, div.rendered_html tbody tr:hover { background: rgba(66, 165, 245, 0.2); } </style> <section id=Modifying-Subsets-of-Vectors > <h1 id=30-numpy-10-vectors-35-modifying-subsets-of-vectors--page-root >Modifying Subsets of Vectors<a class=headerlink  href="#30-numpy-10-vectors-35-modifying-subsets-of-vectors--page-root" title="Permalink to this headline">¶</a></h1> <p>The subsetting logic from the previous reading isn’t just for extracting subsets of vectors to analyze—it’s also useful for modifying vectors. The idea is that instead of keeping elements that meet a logical condition or occur at a specific index, we can change them!</p> <p>For example, let’s consider the vector with the salaries of everyone in my company. Suppose we wanted to give a raise to one of our workers—the person earning $80,000—how would we correct that mistake without re-creating the full vector?</p> <p>The answer is that we can fix it using indexing or a logical statement <strong>on the left side of the assignment operator</strong> to specify that we’re only trying to assign new values to a subset of the entries in an array.</p> <p>To illustrate, let’s work through the example of trying to edit a single entry in a vector of salaries, increasing the salary of the fourth employee (who earns 80,000 dollars) to 90,000 dollars:</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[1]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=kn >import</span> <span class=nn >numpy</span> <span class=k >as</span> <span class=nn >np</span>

<span class=c1 ># Create a vector with salaries of employees</span>
<span class=n >salaries</span> <span class=o >=</span> <span class=n >np</span><span class=o >.</span><span class=n >array</span><span class=p >([</span><span class=mi >105_000</span><span class=p >,</span> <span class=mi >50_000</span><span class=p >,</span> <span class=mi >55_000</span><span class=p >,</span> <span class=mi >80_000</span><span class=p >,</span> <span class=mi >70_000</span><span class=p >])</span>
<span class=n >salaries</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[1]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([105000,  50000,  55000,  80000,  70000])
</pre></div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[2]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># To modify the 4th entry, we can using</span>
<span class=c1 ># indexing *on the left side of the assignment operator*</span>
<span class=c1 ># to assign a new value to only that entry of the array.</span>

<span class=n >salaries</span><span class=p >[</span><span class=mi >3</span><span class=p >]</span> <span class=o >=</span> <span class=mi >90_000</span>
<span class=n >salaries</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[2]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([105000,  50000,  55000,  90000,  70000])
</pre></div></div> </div> <p>We can also do the same thing with logical tests. For example, suppose we wanted to increase the salaries of everyone making less than 60,000 dollars to 65,000 dollars. We just use a logical test—<code class="docutils literal notranslate"><span class=pre >salaries</span> <span class=pre >&lt;</span> <span class=pre >60_000</span></code>—on the left side of the assignment operator to make assignments to the relevant subset of entries:</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[3]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >salaries</span><span class=p >[</span><span class=n >salaries</span> <span class=o >&lt;</span> <span class=mi >60_000</span><span class=p >]</span> <span class=o >=</span> <span class=mi >65_000</span>
<span class=n >salaries</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[3]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([105000,  65000,  65000,  90000,  70000])
</pre></div></div> </div> <p>This trick isn’t just for situations where you have a single value on the right-hand side of the assignment operator. We can also combine this trick with the subsetting skills we Learned about in our last reading, specifying subsets on BOTH sides of the assignment operator.</p> <p>For example, we wanted to give a 10,000 dollar raise to everyone in the company who makes less than 75,000 dollars.</p> <p>If we wanted to give <em>everyone</em> a raise, of course, we could just do:</p> <div class="highlight-python notranslate"><div class=highlight ><pre><span></span><span class=n >salaries</span> <span class=o >=</span> <span class=n >salaries</span> <span class=o >+</span> <span class=mi >10_000</span>
</pre></div> </div> <p>But then we’d be giving the raise to everyone, including the person making 75,000 dollars. So we have to (a) pull out the salaries that are less than 75,000 dollars, (b) increase those salaries by 10,000 dollars, and (c) re-insert them into the original array, replacing the old salaries:</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[4]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># First, let's re-set our salaries.</span>
<span class=n >salaries</span> <span class=o >=</span> <span class=n >np</span><span class=o >.</span><span class=n >array</span><span class=p >([</span><span class=mi >105_000</span><span class=p >,</span> <span class=mi >50_000</span><span class=p >,</span> <span class=mi >55_000</span><span class=p >,</span> <span class=mi >80_000</span><span class=p >,</span> <span class=mi >70_000</span><span class=p >])</span>

<span class=c1 ># Get the subset of entries that have the lower salaries</span>
<span class=n >lower_salaries</span> <span class=o >=</span> <span class=n >salaries</span><span class=p >[</span><span class=n >salaries</span> <span class=o >&lt;</span> <span class=mi >75_000</span><span class=p >]</span>
<span class=n >lower_salaries</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[4]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([50000, 55000, 70000])
</pre></div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[5]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># Increase those lower salaries by ten thousand</span>
<span class=n >new_salaries</span> <span class=o >=</span> <span class=n >lower_salaries</span> <span class=o >+</span> <span class=mi >10_000</span>
<span class=n >new_salaries</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[5]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([60000, 65000, 80000])
</pre></div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[6]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># And now the magic: we re-insert them</span>
<span class=c1 ># into the entries of the original</span>
<span class=c1 ># array that have values less than 75,000</span>
<span class=c1 ># by putting the subset on the left-hand</span>
<span class=c1 ># side of the assignment operator.</span>

<span class=n >salaries</span><span class=p >[</span><span class=n >salaries</span> <span class=o >&lt;</span> <span class=mi >75_000</span><span class=p >]</span> <span class=o >=</span> <span class=n >new_salaries</span>
<span class=n >salaries</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[6]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([105000,  60000,  65000,  80000,  80000])
</pre></div></div> </div> <p>Note that this last operation worked because there were <strong>three</strong> entries identified by the logical test on the left-hand side of the assignment operator (<code class="docutils literal notranslate"><span class=pre >salaries[salaries</span> <span class=pre >&lt;</span> <span class=pre >75_000]</span></code>), and the array we were assigning to those values (<code class="docutils literal notranslate"><span class=pre >new_salaries</span></code>) also had exactly <strong>three</strong> entries. As a result, numpy could easily match the entries being assigned to the entries on the left, putting the first assigned value in the first selected entry of <code class="docutils literal notranslate"><span class=pre >salaries</span></code>, the second assigned value in the second selected entry, and the third assigned value into the third selected entry.</p> <p>The other thing to note is that while we <em>can</em> do this kind of manipulation in several distinct steps—creating <code class="docutils literal notranslate"><span class=pre >lower_salaries</span></code>, modifying it to make <code class="docutils literal notranslate"><span class=pre >new_salaries</span></code>, and then assigning those back into the original <code class="docutils literal notranslate"><span class=pre >salaries</span></code>—we can also combine all those steps into one line:</p> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[7]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># Re-create her original salary vector</span>
<span class=n >salaries</span> <span class=o >=</span> <span class=n >np</span><span class=o >.</span><span class=n >array</span><span class=p >([</span><span class=mi >105_000</span><span class=p >,</span> <span class=mi >50_000</span><span class=p >,</span> <span class=mi >55_000</span><span class=p >,</span> <span class=mi >80_000</span><span class=p >,</span> <span class=mi >70_000</span><span class=p >])</span>
</pre></div> </div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[8]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >salaries</span><span class=p >[</span><span class=n >salaries</span> <span class=o >&lt;</span> <span class=mi >75_000</span><span class=p >]</span> <span class=o >=</span> <span class=n >salaries</span><span class=p >[</span><span class=n >salaries</span> <span class=o >&lt;</span> <span class=mi >75_000</span><span class=p >]</span> <span class=o >+</span> <span class=mi >10_000</span>
<span class=n >salaries</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[8]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([105000,  60000,  65000,  80000,  80000])
</pre></div></div> </div> <p>Visualizing what’s going on here, we can first see how what is happening behind the scenes when we evaluate <code class="docutils literal notranslate"><span class=pre >salaries[salaries</span> <span class=pre >&lt;</span> <span class=pre >75_000]</span></code> as explained above:</p> <img alt="taking salary subset" src="../../_images/2.2.35_modifying_subsets_1.png"/> <p>Then, once we have <code class="docutils literal notranslate"><span class=pre >salaries[salaries</span> <span class=pre >&lt;</span> <span class=pre >75_000]</span></code>, we can modify the values in that subset and update them by adding 10,000 to each value using <code class="docutils literal notranslate"><span class=pre >salaries[salaries</span> <span class=pre >&lt;</span> <span class=pre >75_000]</span> <span class=pre >=</span> <span class=pre >salaries[salaries</span> <span class=pre >&lt;</span> <span class=pre >75_000]</span> <span class=pre >+</span> <span class=pre >10_000</span></code>:</p> <img alt="taking salary subset" src="../../_images/2.2.35_modifying_subsets_2.png"/> <p>To be clear, you don’t <em>have</em> to combine your code into one line like this. My personal rule of thumb is that if I can’t <strong>easily</strong> tell what’s going on when I look at code like this, it’s better to break it out into several operations. Forcing your code into a single line doesn’t make you a “cool programmer”—it just makes you more likely to make a mistake. So feel free to combine your code into a single line when it feels intuitive, but don’t force it.</p> <p>We said this above, but it’s worth emphasizing once more: this kind of assigning-into-subsets only works if the values being assigned “fit” into the entries being selected on the left-hand side.</p> <p>In our first examples above, we were assigning a scalar value (a single number), and numpy knows that when a single value is being assigned to one <em>or more</em> entries in an array, it should just assign that value everywhere:</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[9]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >my_array</span> <span class=o >=</span> <span class=n >np</span><span class=o >.</span><span class=n >array</span><span class=p >([</span><span class=mi >0</span><span class=p >,</span> <span class=mi >1</span><span class=p >,</span> <span class=mi >2</span><span class=p >,</span> <span class=mi >3</span><span class=p >])</span>
<span class=n >my_array</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[9]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([0, 1, 2, 3])
</pre></div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[10]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># Select middle to entries</span>
<span class=n >my_array</span><span class=p >[</span><span class=mi >1</span><span class=p >:</span><span class=mi >3</span><span class=p >]</span> <span class=o >=</span> <span class=o >-</span><span class=mi >99</span>
<span class=n >my_array</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[10]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([  0, -99, -99,   3])
</pre></div></div> </div> <p>And in our later examples, we were assigning vectors of the same length as the selected entries:</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[11]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># Select middle to entries.</span>
<span class=c1 ># Assign vector of length 2 to</span>
<span class=c1 ># these two entries</span>
<span class=n >my_array</span><span class=p >[</span><span class=mi >1</span><span class=p >:</span><span class=mi >3</span><span class=p >]</span> <span class=o >=</span> <span class=n >np</span><span class=o >.</span><span class=n >array</span><span class=p >([</span><span class=mi >100</span><span class=p >,</span> <span class=mi >200</span><span class=p >])</span>
<span class=n >my_array</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[11]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([  0, 100, 200,   3])
</pre></div></div> </div> <p>But if we try to assign anything that <em>isn’t either</em> a scalar (single number) <em>or</em> an array of the same size, we’ll get an error:</p> <div class="highlight-python notranslate"><div class=highlight ><pre><span></span><span class=c1 ># Assign an array of length three</span>
<span class=c1 ># to two spots in `my_array`:</span>
<span class=n >my_array</span><span class=p >[</span><span class=mi >1</span><span class=p >:</span><span class=mi >3</span><span class=p >]</span> <span class=o >=</span> <span class=n >np</span><span class=o >.</span><span class=n >array</span><span class=p >([</span><span class=mi >100</span><span class=p >,</span> <span class=mi >200</span><span class=p >,</span> <span class=mi >300</span><span class=p >])</span>

<span class=o >---------------------------------------------------------------------------</span>
<span class=ne >ValueError</span>                                <span class=n >Traceback</span> <span class=p >(</span><span class=n >most</span> <span class=n >recent</span> <span class=n >call</span> <span class=n >last</span><span class=p >)</span>
<span class=o >/</span><span class=n >Users</span><span class=o >/</span><span class=n >nce8</span><span class=o >/</span><span class=n >github</span><span class=o >/</span><span class=n >mids_coursera</span><span class=o >/</span><span class=n >class_2</span><span class=o >/</span><span class=n >week_2</span><span class=o >/</span><span class=mi >35</span><span class=n >_modifying_subsets_of_vectors</span><span class=o >.</span><span class=n >ipynb</span> <span class=n >Cell</span> <span class=mi >19</span> <span class=ow >in</span> <span class=o >&lt;</span><span class=n >cell</span> <span class=n >line</span><span class=p >:</span> <span class=mi >3</span><span class=o >&gt;</span><span class=p >()</span>
      <span class=mi >1</span> <span class=c1 ># Assign an array of length three</span>
      <span class=mi >2</span> <span class=c1 ># to two spots in `my_array`:</span>
<span class=o >----&gt;</span> <span class=mi >3</span> <span class=n >my_array</span><span class=p >[</span><span class=mi >1</span><span class=p >:</span><span class=mi >3</span><span class=p >]</span> <span class=o >=</span> <span class=n >np</span><span class=o >.</span><span class=n >array</span><span class=p >([</span><span class=mi >100</span><span class=p >,</span> <span class=mi >200</span><span class=p >,</span> <span class=mi >300</span><span class=p >])</span>

<span class=ne >ValueError</span><span class=p >:</span> <span class=n >could</span> <span class=ow >not</span> <span class=n >broadcast</span> <span class=nb >input</span> <span class=n >array</span> <span class=kn >from</span> <span class=nn >shape</span> <span class=p >(</span><span class=mi >3</span><span class=p >,)</span> <span class=n >into</span> <span class=n >shape</span> <span class=p >(</span><span class=mi >2</span><span class=p >,)</span>
</pre></div> </div> <section id=Modifying-Vectors-and-Data-Types > <h2 id=Modifying-Vectors-and-Data-Types >Modifying Vectors and Data Types<a class=headerlink  href="#Modifying-Vectors-and-Data-Types" title="Permalink to this headline">¶</a></h2> <p>You may not have noticed, but up till now, we’ve only been doing “like-for-like” substitutions. For example, when we changed an entry in <code class="docutils literal notranslate"><span class=pre >age</span></code>, we were always replacing one <code class="docutils literal notranslate"><span class=pre >int</span></code> with another.</p> <p>This is important because as we discussed in our last reading, vectors are <em>homogeneously typed</em>, meaning that, unlike lists, you can’t put different types of data in an array.</p> <p>Now when we’re <em>creating</em> a vector, numpy will use type promotion to pick a type that accommodates everything you’re putting into an array. For example, if I pass both bools and integers to <code class="docutils literal notranslate"><span class=pre >np.array()</span></code>, it will just type promote everything to be integers:</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[12]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >np</span><span class=o >.</span><span class=n >array</span><span class=p >([</span><span class=kc >True</span><span class=p >,</span> <span class=kc >False</span><span class=p >,</span> <span class=mi >7</span><span class=p >])</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[12]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([1, 0, 7])
</pre></div></div> </div> <p>But once a vector has been created, numpy stops being so considerate: if you try and cram data of a different type into a vector of a given type, it will try to <em>coerce</em> the data into the established type of the array.</p> <p>For example, if we try and cram 7 into an array that’s already of type <code class="docutils literal notranslate"><span class=pre >bool</span></code>, numpy will <em>coerce</em> 7 into type bool (e.g. run <code class="docutils literal notranslate"><span class=pre >Boolean(7)</span></code>), which will turn <code class="docutils literal notranslate"><span class=pre >7</span></code> into <code class="docutils literal notranslate"><span class=pre >True</span></code> <em>even though this is causing information to be lost</em>:</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[13]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >bool_vector</span> <span class=o >=</span> <span class=n >np</span><span class=o >.</span><span class=n >array</span><span class=p >([</span><span class=kc >True</span><span class=p >,</span> <span class=kc >False</span><span class=p >])</span>
<span class=n >bool_vector</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[13]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([ True, False])
</pre></div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[14]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >bool_vector</span><span class=p >[</span><span class=mi >1</span><span class=p >]</span> <span class=o >=</span> <span class=mi >7</span>
<span class=n >bool_vector</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[14]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([ True,  True])
</pre></div></div> </div> <p>Similarly, if you try and put a floating point number into an integer vector, that float will be type coerced into an integer, which is accomplished by just truncating any information after the decimal:</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[15]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >int_vector</span> <span class=o >=</span> <span class=n >np</span><span class=o >.</span><span class=n >array</span><span class=p >([</span><span class=mi >1</span><span class=p >,</span> <span class=mi >2</span><span class=p >,</span> <span class=mi >3</span><span class=p >])</span>
<span class=n >int_vector</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[15]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([1, 2, 3])
</pre></div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[16]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >int_vector</span><span class=p >[</span><span class=mi >0</span><span class=p >]</span> <span class=o >=</span> <span class=mf >42.989723798729874</span>
<span class=n >int_vector</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[16]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([42,  2,  3])
</pre></div></div> </div> <p>This is why, as we mentioned in the last reading, you might not always want to let numpy pick your datatypes for you. Suppose in the example above, for example, you know you might later need to put a floating point number into <code class="docutils literal notranslate"><span class=pre >int_vector</span></code> – you could instead tell numpy to make it a floating point number vector <em>at creation</em>:</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[17]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >no_longer_an_int_vector</span> <span class=o >=</span> <span class=n >np</span><span class=o >.</span><span class=n >array</span><span class=p >([</span><span class=mi >1</span><span class=p >,</span> <span class=mi >2</span><span class=p >,</span> <span class=mi >3</span><span class=p >],</span> <span class=n >dtype</span><span class=o >=</span><span class=s2 >"float"</span><span class=p >)</span>
<span class=n >no_longer_an_int_vector</span><span class=p >[</span><span class=mi >0</span><span class=p >]</span> <span class=o >=</span> <span class=mf >42.989723798729874</span>
<span class=n >no_longer_an_int_vector</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[17]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([42.9897238,  2.       ,  3.       ])
</pre></div></div> </div> <p>I know this can be a little confusing, so here’s a recap:</p> <ul class=simple > <li><p>When <em>creating</em> a vector, numpy will do everything it can to ensure that you don’t lose any information by type <em>promoting</em> your data to the lowest type that <em>preserves all the information in your data</em>.</p> <li><p>Once a vector has been created, numpy’s hands are tied, so it will use type <em>coercion</em> to force the data you’re trying to put into your existing vector into the established type, <em>even if that causes information loss.</em></p> </ul> </section> <section id=Exercises > <h2 id=Exercises >Exercises<a class=headerlink  href="#Exercises" title="Permalink to this headline">¶</a></h2> <ol class="arabic simple"> <li><p>Create the following vector of salaries: <code class="docutils literal notranslate"><span class=pre >50_000,</span> <span class=pre >105_250,</span> <span class=pre >55_000,</span> <span class=pre >89_000</span></code>. What is the total payroll (sum of all salaries for the company)?</p> <li><p>Now suppose our evil CEO has decided to give herself a raise. Take your salary vector and modify it so that the CEO – the person making 105,250 dollars – gets a raise of 15%.</p> <li><p>115% of 105,250 dollars is 121,037.50 dollars. Is that the value in your array? If not, can you tell why not?</p> <li><p>Recreate your vector, and do <em>something</em> with the <code class="docutils literal notranslate"><span class=pre >dtype</span></code> argument so that when you give the CEO a raise of 15%, she ends up with a salary of 121,037.50 dollars.</p> <li><p>Now suppose this has so annoyed the lowest paid employee (the woman earning 50,000 dollars) that <em>she</em> demands a raise as well. Increase <em>her</em> salary by <em>20%</em>.</p> <li><p>This has so irritated the other two employees you must now give them 10% raises. Increase their salaries by 10%.</p> <li><p>Now calculate the total payroll for the company. In the end, what did the CEO’s ~16,000 raise end up costing the company?</p> </ol> </section> </section> </article> </div> </div> </main> </div> <footer class=md-footer > <div class=md-footer-nav > <nav class="md-footer-nav__inner md-grid"> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright > <div class=md-footer-copyright__highlight > &#169; Copyright 2021, Nick Eubank. </div> Created using <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.5.0. and <a href="https://github.com/bashtage/sphinx-material/">Material for Sphinx</a> </div> </div> </div> </footer> <script src="../../_static/javascripts/application.js"></script> <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>