<!DOCTYPE html> <meta charset=utf-8  /> <meta name=viewport  content="width=device-width, initial-scale=1.0" /><meta name=generator  content="Docutils 0.17.1: http://docutils.sourceforge.net/" /> <meta name=viewport  content="width=device-width,initial-scale=1"> <meta http-equiv=x-ua-compatible  content="ie=edge"> <meta name="lang:clipboard.copy" content="Copy to clipboard"> <meta name="lang:clipboard.copied" content="Copied to clipboard"> <meta name="lang:search.language" content=en > <meta name="lang:search.pipeline.stopwords" content=True > <meta name="lang:search.pipeline.trimmer" content=True > <meta name="lang:search.result.none" content="No matching documents"> <meta name="lang:search.result.one" content="1 matching document"> <meta name="lang:search.result.other" content="# matching documents"> <meta name="lang:search.tokenizer" content="[\s\-]+"> <link href="https://fonts.gstatic.com/" rel=preconnect  crossorigin> <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel=stylesheet > <style> body, input { font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif } code, kbd, pre { font-family: "Roboto Mono", "Courier New", Courier, monospace } </style> <link rel=stylesheet  href="../_static/stylesheets/application.css"/> <link rel=stylesheet  href="../_static/stylesheets/application-palette.css"/> <link rel=stylesheet  href="../_static/stylesheets/application-fixes.css"/> <link rel=stylesheet  href="../_static/fonts/material-icons.css"/> <meta name=theme-color  content="#2196f3"> <script src="../_static/javascripts/modernizr.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-XX133829453-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-XX133829453-1'); </script> <title>Cleaning Data Exercises &#8212; Practical Data Science</title> <link rel=stylesheet  type="text/css" href="../_static/pygments.css" /> <link rel=stylesheet  type="text/css" href="../_static/material.css" /> <script data-url_root="../" id=documentation_options  src="../_static/documentation_options.js"></script> <script src="../_static/jquery.js"></script> <script src="../_static/underscore.js"></script> <script src="../_static/doctools.js"></script> <script crossorigin=anonymous  integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script> <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script> <script defer=defer  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> <link rel="shortcut icon" href="../_static/mids_logo.svg"/> <link rel=index  title=Index  href="../genindex.html" /> <link rel=search  title=Search  href="../search.html" /> <body dir=ltr data-md-color-primary=blue-grey data-md-color-accent=blue> <svg class=md-svg > <defs data-children-count=0 > <svg xmlns="http://www.w3.org/2000/svg" width=416  height=448  viewBox="0 0 416 448" id=__github ><path fill=currentColor  d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle  data-md-toggle=drawer  type=checkbox  id=__drawer > <input class=md-toggle  data-md-toggle=search  type=checkbox  id=__search > <label class=md-overlay  data-md-component=overlay  for=__drawer ></label> <a href="#exercises/Solutions_cleaning" tabindex=1  class=md-skip > Skip to content </a> <header class=md-header  data-md-component=header > <nav class="md-header-nav md-grid"> <div class="md-flex navheader"> <div class="md-flex__cell md-flex__cell--shrink"> <a href="../index.html" title="Practical Data Science" class="md-header-nav__button md-logo"> <img src="../_static/mids_logo.svg" height=26  alt="Practical Data Science logo"> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer ></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title > <span class=md-header-nav__topic >Practical Data Science</span> <span class=md-header-nav__topic > Cleaning Data Exercises </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search ></label> <div class=md-search  data-md-component=search  role=dialog > <label class=md-search__overlay  for=__search ></label> <div class=md-search__inner  role=search > <form class=md-search__form  action="../search.html" method=get  name=search > <input type=text  class=md-search__input  name=q  placeholder=""Search"" autocapitalize=off  autocomplete=off  spellcheck=false  data-md-component=query  data-md-state=active > <label class="md-icon md-search__icon" for=__search ></label> <button type=reset  class="md-icon md-search__icon" data-md-component=reset  tabindex=-1 > &#xE5CD; </button> </form> <div class=md-search__output > <div class=md-search__scrollwrap  data-md-scrollfix> <div class=md-search-result  data-md-component=result > <div class=md-search-result__meta > Type to start searching </div> <ol class=md-search-result__list ></ol> </div> </div> </div> </div> </div> </div> <script src="../_static/javascripts/version_dropdown.js"></script> <script> var json_loc = "../"versions.json"", target_loc = "../../", text = "Versions"; $( document ).ready( add_version_dropdown(json_loc, target_loc, text)); </script> </div> </nav> </header> <div class=md-container > <nav class=md-tabs  data-md-component=tabs > <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list > <li class=md-tabs__item ><a href="../index.html" class=md-tabs__link >Home</a> <li class=md-tabs__item ><a href="../class_schedule.html" class=md-tabs__link >Class Schedule</a> <li class=md-tabs__item ><a href="../topic_list.html" class=md-tabs__link >Topic List</a> <li class=md-tabs__item ><a href="https://www.nickeubank.com" class=md-tabs__link >About The Author</a> </ul> </div> </nav> <main class=md-main > <div class="md-main__inner md-grid" data-md-component=container > <div class="md-sidebar md-sidebar--primary" data-md-component=navigation > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--primary" data-md-level=0 > <label class="md-nav__title md-nav__title--site" for=__drawer > <a href="../index.html" title="Practical Data Science" class="md-nav__button md-logo"> <img src="../_static/mids_logo.svg" alt=" logo" width=48  height=48 > </a> <a href="../index.html" title="Practical Data Science">Practical Data Science</a> </label> <ul class=md-nav__list > <li class=md-nav__item > <a href="../class_schedule.html" class=md-nav__link >Class Schedule</a> <li class=md-nav__item > <a href="../autograder_guidelines.html" class=md-nav__link >Autograder Guidelines</a> <li class=md-nav__item > <a href="../not_a_mids_student.html" class=md-nav__link >Not a MIDS Student?</a> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--secondary"> <label class=md-nav__title  for=__toc >"Contents"</label> <ul class=md-nav__list  data-md-scrollfix=""> <li class=md-nav__item ><a href="#exercises-solutions-cleaning--page-root" class=md-nav__link >Cleaning Data Exercises</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Gradescope-Autograding" class=md-nav__link >Gradescope Autograding</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Submission-Limits" class=md-nav__link >Submission Limits</a> </ul> </nav> <li class=md-nav__item ><a href="#Exercises" class=md-nav__link >Exercises</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Exercise-1" class=md-nav__link >Exercise 1</a> <li class=md-nav__item ><a href="#Exercise-2" class=md-nav__link >Exercise 2</a> <li class=md-nav__item ><a href="#Exercise-3" class=md-nav__link >Exercise 3</a> <li class=md-nav__item ><a href="#Exercise-4" class=md-nav__link >Exercise 4</a> <li class=md-nav__item ><a href="#Exercise-5" class=md-nav__link >Exercise 5</a> <li class=md-nav__item ><a href="#Exercise-6" class=md-nav__link >Exercise 6</a> <li class=md-nav__item ><a href="#Exercise-7" class=md-nav__link >Exercise 7</a> <li class=md-nav__item ><a href="#Exercise-8" class=md-nav__link >Exercise 8</a> <li class=md-nav__item ><a href="#Exercise-9" class=md-nav__link >Exercise 9</a> <li class=md-nav__item ><a href="#Exercise-10" class=md-nav__link >Exercise 10</a> <li class=md-nav__item ><a href="#Exercise-11" class=md-nav__link >Exercise 11</a> <li class=md-nav__item ><a href="#Exercise-12" class=md-nav__link >Exercise 12</a> </ul> </nav> <li class=md-nav__item ><a href="#Exercise-13" class=md-nav__link >Exercise 13</a> <li class=md-nav__item ><a href="#Want-More-Practice?" class=md-nav__link >Want More Practice?</a> </ul> </nav> </ul> </nav> </div> </div> </div> <div class=md-content > <article class="md-content__inner md-typeset" role=main > <style> /* CSS for nbsphinx extension */ /* remove conflicting styling from Sphinx themes */ div.nbinput.container div.prompt *, div.nboutput.container div.prompt *, div.nbinput.container div.input_area pre, div.nboutput.container div.output_area pre, div.nbinput.container div.input_area .highlight, div.nboutput.container div.output_area .highlight { border: none; padding: 0; margin: 0; box-shadow: none; } div.nbinput.container > div[class*=highlight], div.nboutput.container > div[class*=highlight] { margin: 0; } div.nbinput.container div.prompt *, div.nboutput.container div.prompt * { background: none; } div.nboutput.container div.output_area .highlight, div.nboutput.container div.output_area pre { background: unset; } div.nboutput.container div.output_area div.highlight { color: unset; /* override Pygments text color */ } /* avoid gaps between output lines */ div.nboutput.container div[class*=highlight] pre { line-height: normal; } /* input/output containers */ div.nbinput.container, div.nboutput.container { display: -webkit-flex; display: flex; align-items: flex-start; margin: 0; width: 100%; } @media (max-width: 540px) { div.nbinput.container, div.nboutput.container { flex-direction: column; } } /* input container */ div.nbinput.container { padding-top: 5px; } /* last container */ div.nblast.container { padding-bottom: 5px; } /* input prompt */ div.nbinput.container div.prompt pre { color: #307FC1; } /* output prompt */ div.nboutput.container div.prompt pre { color: #BF5B3D; } /* all prompts */ div.nbinput.container div.prompt, div.nboutput.container div.prompt { width: 4.5ex; padding-top: 5px; position: relative; user-select: none; } div.nbinput.container div.prompt > div, div.nboutput.container div.prompt > div { position: absolute; right: 0; margin-right: 0.3ex; } @media (max-width: 540px) { div.nbinput.container div.prompt, div.nboutput.container div.prompt { width: unset; text-align: left; padding: 0.4em; } div.nboutput.container div.prompt.empty { padding: 0; } div.nbinput.container div.prompt > div, div.nboutput.container div.prompt > div { position: unset; } } /* disable scrollbars on prompts */ div.nbinput.container div.prompt pre, div.nboutput.container div.prompt pre { overflow: hidden; } /* input/output area */ div.nbinput.container div.input_area, div.nboutput.container div.output_area { -webkit-flex: 1; flex: 1; overflow: auto; } @media (max-width: 540px) { div.nbinput.container div.input_area, div.nboutput.container div.output_area { width: 100%; } } /* input area */ div.nbinput.container div.input_area { border: 1px solid #e0e0e0; border-radius: 2px; /*background: #f5f5f5;*/ } /* override MathJax center alignment in output cells */ div.nboutput.container div[class*=MathJax] { text-align: left !important; } /* override sphinx.ext.imgmath center alignment in output cells */ div.nboutput.container div.math p { text-align: left; } /* standard error */ div.nboutput.container div.output_area.stderr { background: #fdd; } /* ANSI colors */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-default-inverse-fg { color: #FFFFFF; } .ansi-default-inverse-bg { background-color: #000000; } .ansi-bold { font-weight: bold; } .ansi-underline { text-decoration: underline; } div.nbinput.container div.input_area div[class*=highlight] > pre, div.nboutput.container div.output_area div[class*=highlight] > pre, div.nboutput.container div.output_area div[class*=highlight].math, div.nboutput.container div.output_area.rendered_html, div.nboutput.container div.output_area > div.output_javascript, div.nboutput.container div.output_area:not(.rendered_html) > img{ padding: 5px; margin: 0; } /* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */ div.nbinput.container div.input_area > div[class^='highlight'], div.nboutput.container div.output_area > div[class^='highlight']{ overflow-y: hidden; } /* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */ .prompt .copybtn { display: none; } /* Some additional styling taken form the Jupyter notebook CSS */ .jp-RenderedHTMLCommon table, div.rendered_html table { border: none; border-collapse: collapse; border-spacing: 0; color: black; font-size: 12px; table-layout: fixed; } .jp-RenderedHTMLCommon thead, div.rendered_html thead { border-bottom: 1px solid black; vertical-align: bottom; } .jp-RenderedHTMLCommon tr, .jp-RenderedHTMLCommon th, .jp-RenderedHTMLCommon td, div.rendered_html tr, div.rendered_html th, div.rendered_html td { text-align: right; vertical-align: middle; padding: 0.5em 0.5em; line-height: normal; white-space: normal; max-width: none; border: none; } .jp-RenderedHTMLCommon th, div.rendered_html th { font-weight: bold; } .jp-RenderedHTMLCommon tbody tr:nth-child(odd), div.rendered_html tbody tr:nth-child(odd) { background: #f5f5f5; } .jp-RenderedHTMLCommon tbody tr:hover, div.rendered_html tbody tr:hover { background: rgba(66, 165, 245, 0.2); } </style> <section id=Cleaning-Data-Exercises > <h1 id=exercises-solutions-cleaning--page-root >Cleaning Data Exercises<a class=headerlink  href="#exercises-solutions-cleaning--page-root" title="Permalink to this headline">¶</a></h1> <p>In this exercise, we’ll be returning to the American Community Survey data we used previously to measuring racial income inequality in the United States. In today’s exercise, we’ll be using it to measure the returns to education and how those returns vary by race and gender.</p> <section id=Gradescope-Autograding > <h2 id=Gradescope-Autograding >Gradescope Autograding<a class=headerlink  href="#Gradescope-Autograding" title="Permalink to this headline">¶</a></h2> <p>This assignment will be autograded using the same autograder we used for the Missing Values exercise. As was the case last time, the only requirements for submitting this assignment are:</p> <ul class=simple > <li><p>you may only import pandas, numpy, and matplotlib.</p> <li><p>you import data <strong>from a URL</strong> (since the autograder in the cloud won’t see your file system)</p> <li><p>you name your notebook file <code class="docutils literal notranslate"><span class=pre >exercise_cleaning.ipynb</span></code></p> <li><p>you store your solutions in a dictionary called <code class="docutils literal notranslate"><span class=pre >results</span></code> with answers assigned to the keys provided in the prompts below.</p> <li><p>your notebook runs from the start to completion without any errors. That means that for questions that (deliberately) invite you to write code that <em>causes</em> errors, before submitting comment out the code that generates the error to ensure it won’t interrupt notebook execution.</p> </ul> <p>Your notebook will be executed by the autograder and the value of identified dictionary entries will then be checked against solution values. However, be aware TAs will <em>also</em> review your notebooks for answers to other questions and to ensure your notebook is well written and formatted.</p> <p>You can check that you have answers for all questions in your <code class="docutils literal notranslate"><span class=pre >results</span></code> dictionary with this code:</p> <div class="highlight-python notranslate"><div class=highlight ><pre><span></span><span class=k >assert</span> <span class=nb >set</span><span class=p >(</span><span class=n >results</span><span class=o >.</span><span class=n >keys</span><span class=p >())</span> <span class=o >==</span> <span class=p >{</span>
    <span class=s2 >"ex5_age_young"</span><span class=p >,</span>
    <span class=s2 >"ex5_age_old"</span><span class=p >,</span>
    <span class=s2 >"ex7_avg_age"</span><span class=p >,</span>
    <span class=s2 >"ex8_avg_age"</span><span class=p >,</span>
    <span class=s2 >"ex9_num_college"</span><span class=p >,</span>
    <span class=s2 >"ex11_share_male_w_degrees"</span><span class=p >,</span>
    <span class=s2 >"ex11_share_female_w_degrees"</span><span class=p >,</span>
    <span class=s2 >"ex12_comparing"</span><span class=p >,</span>
<span class=p >}</span>
</pre></div> </div> <section id=Submission-Limits > <h3 id=Submission-Limits >Submission Limits<a class=headerlink  href="#Submission-Limits" title="Permalink to this headline">¶</a></h3> <p>Please remember that you are <strong>only allowed three submissions to the autograder.</strong> Your last submission (if you submit 3 or fewer times), or your third submission (if you submit more than 3 times) will determine your grade.</p> </section> </section> <section id=Exercises > <h2 id=Exercises >Exercises<a class=headerlink  href="#Exercises" title="Permalink to this headline">¶</a></h2> <section id=Exercise-1 > <h3 id=Exercise-1 >Exercise 1<a class=headerlink  href="#Exercise-1" title="Permalink to this headline">¶</a></h3> <p>For these cleaning exercises, we’ll return to the ACS data we’ve used before one last time. We’ll be working with <code class="docutils literal notranslate"><span class=pre >US_ACS_2017_10pct_sample.dta</span></code>. Import the data (please use url for the autograder).</p> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[1]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=kn >import</span> <span class=nn >pandas</span> <span class=k >as</span> <span class=nn >pd</span>
<span class=kn >import</span> <span class=nn >numpy</span> <span class=k >as</span> <span class=nn >np</span>

<span class=c1 ># Download the data</span>
<span class=n >acs</span> <span class=o >=</span> <span class=n >pd</span><span class=o >.</span><span class=n >read_stata</span><span class=p >(</span>
    <span class=s2 >"https://github.com/nickeubank/MIDS_Data/blob/master"</span>
    <span class=s2 >"/US_AmericanCommunitySurvey/US_ACS_2017_10pct_sample.dta?raw=True"</span>
<span class=p >)</span>
<br/></pre></div> </div> </div> </section> <section id=Exercise-2 > <h3 id=Exercise-2 >Exercise 2<a class=headerlink  href="#Exercise-2" title="Permalink to this headline">¶</a></h3> <p>For our exercises today, we’ll focus on <code class="docutils literal notranslate"><span class=pre >age</span></code>, <code class="docutils literal notranslate"><span class=pre >sex</span></code>, <code class="docutils literal notranslate"><span class=pre >educ</span></code> (education), and <code class="docutils literal notranslate"><span class=pre >inctot</span></code> (total income). Subset your data to those variables, and quickly look at a sample of 10 rows.</p> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[2]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >acs</span> <span class=o >=</span> <span class=n >acs</span><span class=p >[[</span><span class=s2 >"age"</span><span class=p >,</span> <span class=s2 >"sex"</span><span class=p >,</span> <span class=s2 >"educ"</span><span class=p >,</span> <span class=s2 >"inctot"</span><span class=p >]]</span><span class=o >.</span><span class=n >copy</span><span class=p >()</span>
<br/></pre></div> </div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[3]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >acs</span><span class=o >.</span><span class=n >sample</span><span class=p >(</span><span class=mi >10</span><span class=p >)</span>
<br/></pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[3]:
</pre></div> </div> <div class="output_area rendered_html docutils container"> <div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border=1  class=dataframe > <thead> <tr style="text-align: right;"> <th> <th>age <th>sex <th>educ <th>inctot <tr> <th>200613 <td>23 <td>female <td>grade 5, 6, 7, or 8 <td>16000 <tr> <th>271044 <td>59 <td>male <td>grade 12 <td>79000 <tr> <th>146543 <td>33 <td>male <td>grade 9 <td>24900 <tr> <th>57771 <td>24 <td>female <td>2 years of college <td>12500 <tr> <th>209706 <td>55 <td>female <td>grade 12 <td>15950 <tr> <th>277650 <td>61 <td>female <td>grade 12 <td>1000 <tr> <th>90005 <td>59 <td>male <td>grade 12 <td>5300 <tr> <th>297992 <td>46 <td>female <td>grade 12 <td>35000 <tr> <th>245298 <td>25 <td>female <td>grade 12 <td>1800 <tr> <th>315707 <td>57 <td>male <td>4 years of college <td>95000 </table> </div></div> </div> </section> <section id=Exercise-3 > <h3 id=Exercise-3 >Exercise 3<a class=headerlink  href="#Exercise-3" title="Permalink to this headline">¶</a></h3> <p>As before, all the values of <code class="docutils literal notranslate"><span class=pre >9999999</span></code> have the potential to cause us real problems, so replace all the values of <code class="docutils literal notranslate"><span class=pre >inctot</span></code> that are <code class="docutils literal notranslate"><span class=pre >9999999</span></code> with <code class="docutils literal notranslate"><span class=pre >np.nan</span></code>.</p> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[4]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >acs</span><span class=p >[</span><span class=s2 >"inctot"</span><span class=p >]</span> <span class=o >=</span> <span class=n >acs</span><span class=p >[</span><span class=s2 >"inctot"</span><span class=p >]</span><span class=o >.</span><span class=n >replace</span><span class=p >(</span><span class=mi >9999999</span><span class=p >,</span> <span class=n >np</span><span class=o >.</span><span class=n >nan</span><span class=p >)</span>
<br/></pre></div> </div> </div> </section> <section id=Exercise-4 > <h3 id=Exercise-4 >Exercise 4<a class=headerlink  href="#Exercise-4" title="Permalink to this headline">¶</a></h3> <p>Attempt to calculate the average age of people in our data. What do you get? Why are you getting that error?</p> <p>You <em>should</em> get an error in trying to answer this question, but <strong>PLEASE LEAVE THE CODE THAT GENERATES THIS ERROR COMMENTED OUT SO YOUR NOTEBOOK WILL RUN IN THE AUTOGRADER</strong>.</p> <p>Then talk about the error in a markdown cell.</p> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[5]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># Code I'd run, but which I'm commenting out so this notebook runs:</span>

<span class=c1 ># acs["age"].mean()</span>
<br/></pre></div> </div> </div> <blockquote> <div><p>I get a <code class="docutils literal notranslate"><span class=pre >TypeError</span></code>. Namely: <code class="docutils literal notranslate"><span class=pre >TypeError:</span> <span class=pre >'Categorical'</span> <span class=pre >with</span> <span class=pre >dtype</span> <span class=pre >category</span> <span class=pre >does</span> <span class=pre >not</span> <span class=pre >support</span> <span class=pre >reduction</span> <span class=pre >'mean'</span></code> It appears I’m getting the error because <code class="docutils literal notranslate"><span class=pre >age</span></code> is being stored as a Categorical rather than as a numeric type, and <code class="docutils literal notranslate"><span class=pre >mean</span></code> only works for numeric data.</p> </div></blockquote> </section> <section id=Exercise-5 > <h3 id=Exercise-5 >Exercise 5<a class=headerlink  href="#Exercise-5" title="Permalink to this headline">¶</a></h3> <p>We want to be able to calculate things using age, so we need it to be a numeric type. Check the current type of <code class="docutils literal notranslate"><span class=pre >age</span></code>, and look at all the values of <code class="docutils literal notranslate"><span class=pre >age</span></code> to figure out why it’s categorical and not numeric. You should find two problematic categories. Store the values of these categories in <code class="docutils literal notranslate"><span class=pre >"ex5_age_young"</span></code> and <code class="docutils literal notranslate"><span class=pre >"ex5_age_old"</span></code> (once you find them, it should be clear which is which).</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[6]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >results</span> <span class=o >=</span> <span class=nb >dict</span><span class=p >()</span>

<span class=c1 ># One way to find problems:</span>

<span class=c1 ># Make string so can use `str.isnumeric`</span>
<span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span> <span class=o >=</span> <span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span><span class=o >.</span><span class=n >astype</span><span class=p >(</span><span class=s2 >"str"</span><span class=p >)</span>

<span class=c1 ># us `str.isnumeric`</span>
<span class=n >problems</span> <span class=o >=</span> <span class=n >acs</span><span class=o >.</span><span class=n >loc</span><span class=p >[</span><span class=o >~</span><span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span><span class=o >.</span><span class=n >str</span><span class=o >.</span><span class=n >isnumeric</span><span class=p >(),</span> <span class=s2 >"age"</span><span class=p >]</span><span class=o >.</span><span class=n >unique</span><span class=p >()</span>
<span class=n >problems</span>
<br/></pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[6]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array(['less than 1 year old', '90 (90+ in 1980 and 1990)'], dtype=object)
</pre></div></div> </div> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[7]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># Or just poke around!</span>

<span class=c1 ># I could run this code, but I'm commenting it out so this notebook isn't awful to look at:</span>

<span class=c1 ># for i in acs.age.value_counts().index:</span>
<span class=c1 >#     print(i)</span>
<br/></pre></div> </div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[8]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >results</span><span class=p >[</span><span class=s2 >"ex5_age_young"</span><span class=p >]</span> <span class=o >=</span> <span class=n >problems</span><span class=p >[</span><span class=mi >0</span><span class=p >]</span>
<span class=n >results</span><span class=p >[</span><span class=s2 >"ex5_age_old"</span><span class=p >]</span> <span class=o >=</span> <span class=n >problems</span><span class=p >[</span><span class=mi >1</span><span class=p >]</span>
<span class=nb >print</span><span class=p >(</span>
    <span class=sa >f</span><span class=s2 >"The problematic values are '</span><span class=si >{</span><span class=n >results</span><span class=p >[</span><span class=s1 >'ex5_age_young'</span><span class=p >]</span><span class=si >}</span><span class=s2 >' and '</span><span class=si >{</span><span class=n >results</span><span class=p >[</span><span class=s1 >'ex5_age_old'</span><span class=p >]</span><span class=si >}</span><span class=s2 >'"</span>
<span class=p >)</span>
<br/></pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
The problematic values are 'less than 1 year old' and '90 (90+ in 1980 and 1990)'
</pre></div></div> </div> </section> <section id=Exercise-6 > <h3 id=Exercise-6 >Exercise 6<a class=headerlink  href="#Exercise-6" title="Permalink to this headline">¶</a></h3> <p>In order to convert <code class="docutils literal notranslate"><span class=pre >age</span></code> into a numeric variable, we need to replace those problematic entries with values that <code class="docutils literal notranslate"><span class=pre >pandas</span></code> can later convert into numbers. Pick appropriate substitutions for the existing values and replace the current values.</p> <p><strong>Hint 1:</strong> Categorical variables act like strings, so you might want to use string methods!</p> <p><strong>Hint 2:</strong> Remember that characters like parentheses, pluses, asterisks, etc. are special in Python strings, and you have to escape them if you want them to be interpreted literally!</p> <p><strong>Hint 3:</strong> Because the US Census has been conducted regularly for hundreds of years but exactly how the census has been conducted have occasionally changed, variables are sometimes coded in a way that might be interpreted in different ways for different census years. For example, hypothetically, one might write <code class="docutils literal notranslate"><span class=pre >90</span> <span class=pre >(90+</span> <span class=pre >in</span> <span class=pre >1980</span> <span class=pre >and</span> <span class=pre >1990)</span></code> if the Censuses conducted in 1980 and 1990 used to top-code age at 90 (any values <em>over</em> 90 were just coded as 90), but more recent Censuses no longer top-coded age and recorded ages over 90 as the respondents actual age.</p> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[9]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span> <span class=o >=</span> <span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span><span class=o >.</span><span class=n >str</span><span class=o >.</span><span class=n >replace</span><span class=p >(</span><span class=s2 >"less than 1 year old"</span><span class=p >,</span> <span class=s2 >"0"</span><span class=p >,</span> <span class=n >regex</span><span class=o >=</span><span class=kc >True</span><span class=p >)</span>
<span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span> <span class=o >=</span> <span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span><span class=o >.</span><span class=n >str</span><span class=o >.</span><span class=n >replace</span><span class=p >(</span><span class=s2 >"90 \(90\+ in 1980 and 1990\)"</span><span class=p >,</span> <span class=s2 >"90"</span><span class=p >,</span> <span class=n >regex</span><span class=o >=</span><span class=kc >True</span><span class=p >)</span>
<br/></pre></div> </div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[10]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># Check that worked</span>
<span class=n >acs</span><span class=o >.</span><span class=n >loc</span><span class=p >[</span><span class=o >~</span><span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span><span class=o >.</span><span class=n >str</span><span class=o >.</span><span class=n >isnumeric</span><span class=p >(),</span> <span class=s2 >"age"</span><span class=p >]</span><span class=o >.</span><span class=n >unique</span><span class=p >()</span>
<br/></pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[10]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
array([], dtype=object)
</pre></div></div> </div> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[11]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=k >assert</span> <span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span><span class=o >.</span><span class=n >str</span><span class=o >.</span><span class=n >isnumeric</span><span class=p >()</span><span class=o >.</span><span class=n >all</span><span class=p >()</span>
<br/></pre></div> </div> </div> </section> <section id=Exercise-7 > <h3 id=Exercise-7 >Exercise 7<a class=headerlink  href="#Exercise-7" title="Permalink to this headline">¶</a></h3> <p>Now convert age from a categorical to numeric. Calculate the average age amoung this group, and store it in <code class="docutils literal notranslate"><span class=pre >"ex7_avg_age"</span></code>.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[12]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span> <span class=o >=</span> <span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span><span class=o >.</span><span class=n >astype</span><span class=p >(</span><span class=s2 >"int"</span><span class=p >)</span>
<span class=n >results</span><span class=p >[</span><span class=s2 >"ex7_avg_age"</span><span class=p >]</span> <span class=o >=</span> <span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span><span class=o >.</span><span class=n >mean</span><span class=p >()</span>
<span class=nb >print</span><span class=p >(</span><span class=sa >f</span><span class=s2 >"The average age is </span><span class=si >{</span><span class=n >results</span><span class=p >[</span><span class=s1 >'ex7_avg_age'</span><span class=p >]</span><span class=si >:</span><span class=s2 >.2f</span><span class=si >}</span><span class=s2 >"</span><span class=p >)</span>
<br/></pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
The average age is 41.30
</pre></div></div> </div> </section> <section id=Exercise-8 > <h3 id=Exercise-8 >Exercise 8<a class=headerlink  href="#Exercise-8" title="Permalink to this headline">¶</a></h3> <p>Let’s now filter out anyone in our data whose age is less than 18. Note that before made <code class="docutils literal notranslate"><span class=pre >age</span></code> a numeric variable, we couldn’t do this! Again, calculate the average age and this time store it in <code class="docutils literal notranslate"><span class=pre >"ex8_avg_age"</span></code>.</p> <p>Use this sample of people 18 and over for all subsequent exercises.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[13]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >acs</span> <span class=o >=</span> <span class=n >acs</span><span class=p >[</span><span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span> <span class=o >&gt;=</span> <span class=mi >18</span><span class=p >]</span><span class=o >.</span><span class=n >copy</span><span class=p >()</span>
<span class=n >results</span><span class=p >[</span><span class=s2 >"ex8_avg_age"</span><span class=p >]</span> <span class=o >=</span> <span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span><span class=o >.</span><span class=n >mean</span><span class=p >()</span>
<span class=nb >print</span><span class=p >(</span><span class=sa >f</span><span class=s2 >"The average age of those above 18 is </span><span class=si >{</span><span class=n >results</span><span class=p >[</span><span class=s1 >'ex8_avg_age'</span><span class=p >]</span><span class=si >:</span><span class=s2 >.2f</span><span class=si >}</span><span class=s2 >"</span><span class=p >)</span>
<br/></pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
The average age of those above 18 is 49.76
</pre></div></div> </div> </section> <section id=Exercise-9 > <h3 id=Exercise-9 >Exercise 9<a class=headerlink  href="#Exercise-9" title="Permalink to this headline">¶</a></h3> <p>Create an indicator variable for whether each person has <em>at least</em> a college Bachelor’s degree called <code class="docutils literal notranslate"><span class=pre >college_degree</span></code>. Use this variable to calculate the number of people in the dataset with a college degree. You may assume that to get a college degree you need to complete at least 4 years of college. Save the result as <code class="docutils literal notranslate"><span class=pre >"ex9_num_college"</span></code>.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[14]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >acs</span><span class=p >[</span><span class=s2 >"educ"</span><span class=p >]</span><span class=o >.</span><span class=n >value_counts</span><span class=p >(</span><span class=n >dropna</span><span class=o >=</span><span class=kc >False</span><span class=p >)</span>
<br/></pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[14]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
grade 12                     92576
4 years of college           47212
1 year of college            38746
5+ years of college          29801
2 years of college           20753
grade 5, 6, 7, or 8           5975
grade 11                      5816
grade 10                      4078
n/a or no schooling           3644
grade 9                       3145
nursery school to grade 4     1288
Name: educ, dtype: int64
</pre></div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[15]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># Could do with two conditions and |</span>
<span class=n >acs</span><span class=p >[</span><span class=s2 >"college_degree"</span><span class=p >]</span> <span class=o >=</span> <span class=p >(</span><span class=n >acs</span><span class=p >[</span><span class=s2 >"educ"</span><span class=p >]</span> <span class=o >==</span> <span class=s2 >"4 years of college"</span><span class=p >)</span> <span class=o >|</span> <span class=p >(</span>
    <span class=n >acs</span><span class=p >[</span><span class=s2 >"educ"</span><span class=p >]</span> <span class=o >==</span> <span class=s2 >"5+ years of college"</span>
<span class=p >)</span>
<span class=n >acs</span><span class=p >[</span><span class=s2 >"college_degree"</span><span class=p >]</span><span class=o >.</span><span class=n >value_counts</span><span class=p >(</span><span class=n >dropna</span><span class=o >=</span><span class=kc >False</span><span class=p >)</span>
<br/></pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[15]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
False    176021
True      77013
Name: college_degree, dtype: int64
</pre></div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[16]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># Or you could do with `.isin`</span>
<span class=n >acs</span><span class=p >[</span><span class=s2 >"college_degree"</span><span class=p >]</span> <span class=o >=</span> <span class=n >acs</span><span class=p >[</span><span class=s2 >"educ"</span><span class=p >]</span><span class=o >.</span><span class=n >isin</span><span class=p >([</span><span class=s2 >"4 years of college"</span><span class=p >,</span> <span class=s2 >"5+ years of college"</span><span class=p >])</span>
<span class=n >acs</span><span class=p >[</span><span class=s2 >"college_degree"</span><span class=p >]</span><span class=o >.</span><span class=n >value_counts</span><span class=p >(</span><span class=n >dropna</span><span class=o >=</span><span class=kc >False</span><span class=p >)</span>
<br/></pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[16]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
False    176021
True      77013
Name: college_degree, dtype: int64
</pre></div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[17]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># Check it worked</span>
<span class=n >acs</span><span class=o >.</span><span class=n >loc</span><span class=p >[</span><span class=n >acs</span><span class=p >[</span><span class=s2 >"college_degree"</span><span class=p >]</span> <span class=o >==</span> <span class=mi >1</span><span class=p >,</span> <span class=s2 >"educ"</span><span class=p >]</span><span class=o >.</span><span class=n >value_counts</span><span class=p >()</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[17]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
4 years of college           47212
5+ years of college          29801
n/a or no schooling              0
nursery school to grade 4        0
grade 5, 6, 7, or 8              0
grade 9                          0
grade 10                         0
grade 11                         0
grade 12                         0
1 year of college                0
2 years of college               0
Name: educ, dtype: int64
</pre></div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[18]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=c1 ># Remember booleans are just special cases of 0 and 1, so</span>
<span class=c1 ># the count that's true we can get with `sum`</span>
<span class=n >results</span><span class=p >[</span><span class=s2 >"ex9_num_college"</span><span class=p >]</span> <span class=o >=</span> <span class=n >acs</span><span class=p >[</span><span class=s2 >"college_degree"</span><span class=p >]</span><span class=o >.</span><span class=n >sum</span><span class=p >()</span>
<span class=nb >print</span><span class=p >(</span>
    <span class=sa >f</span><span class=s2 >"There are </span><span class=si >{</span><span class=n >results</span><span class=p >[</span><span class=s1 >'ex9_num_college'</span><span class=p >]</span><span class=si >:</span><span class=s2 >,.0f</span><span class=si >}</span><span class=s2 > people in our data with a college degree."</span>
<span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
There are 77,013 people in our data with a college degree.
</pre></div></div> </div> </section> <section id=Exercise-10 > <h3 id=Exercise-10 >Exercise 10<a class=headerlink  href="#Exercise-10" title="Permalink to this headline">¶</a></h3> <p>Let’s examine how the educational gender gap. Use <code class="docutils literal notranslate"><span class=pre >pd.crosstab</span></code> to create a cross-tabulation of <code class="docutils literal notranslate"><span class=pre >sex</span></code> and <code class="docutils literal notranslate"><span class=pre >college_degree</span></code>. <code class="docutils literal notranslate"><span class=pre >pd.crosstab</span></code> will give you the number of people who have each combination of <code class="docutils literal notranslate"><span class=pre >sex</span></code> and <code class="docutils literal notranslate"><span class=pre >college_degree</span></code> (so in this case, it will give us a 2x2 table with Male and Female as rows, and <code class="docutils literal notranslate"><span class=pre >college_degree</span></code> True and False as columns, or vice versa.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[19]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >pd</span><span class=o >.</span><span class=n >crosstab</span><span class=p >(</span><span class=n >acs</span><span class=p >[</span><span class=s2 >"college_degree"</span><span class=p >],</span> <span class=n >acs</span><span class=p >[</span><span class=s2 >"sex"</span><span class=p >])</span>
<br/></pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[19]:
</pre></div> </div> <div class="output_area rendered_html docutils container"> <div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border=1  class=dataframe > <thead> <tr style="text-align: right;"> <th>sex <th>male <th>female <tr> <th>college_degree <th> <th> <tr> <th>False <td>85821 <td>90200 <tr> <th>True <td>36181 <td>40832 </table> </div></div> </div> </section> <section id=Exercise-11 > <h3 id=Exercise-11 >Exercise 11<a class=headerlink  href="#Exercise-11" title="Permalink to this headline">¶</a></h3> <p>Counts are kind of hard to interpret. <code class="docutils literal notranslate"><span class=pre >pd.crosstab</span></code> can also normalize values to give percentages. Look at the <code class="docutils literal notranslate"><span class=pre >pd.crosstab</span></code> help file to figure out how to normalize the values in the table. Normalize them so that you get the share of men with and without college degree, and the share of women with and without college degrees.</p> <p>Store the share (between 0 and 1) of men with college degrees in <code class="docutils literal notranslate"><span class=pre >"ex11_share_male_w_degrees"</span></code>, and the share of women with degrees in <code class="docutils literal notranslate"><span class=pre >"ex11_share_female_w_degrees"</span></code>.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[20]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >tab</span> <span class=o >=</span> <span class=n >pd</span><span class=o >.</span><span class=n >crosstab</span><span class=p >(</span><span class=n >acs</span><span class=p >[</span><span class=s2 >"college_degree"</span><span class=p >],</span> <span class=n >acs</span><span class=p >[</span><span class=s2 >"sex"</span><span class=p >],</span> <span class=n >normalize</span><span class=o >=</span><span class=s2 >"columns"</span><span class=p >)</span>
<span class=n >tab</span>
<br/></pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[20]:
</pre></div> </div> <div class="output_area rendered_html docutils container"> <div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border=1  class=dataframe > <thead> <tr style="text-align: right;"> <th>sex <th>male <th>female <tr> <th>college_degree <th> <th> <tr> <th>False <td>0.703439 <td>0.688381 <tr> <th>True <td>0.296561 <td>0.311619 </table> </div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[21]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=k >for</span> <span class=n >g</span> <span class=ow >in</span> <span class=p >[</span><span class=s2 >"male"</span><span class=p >,</span> <span class=s2 >"female"</span><span class=p >]:</span>
    <span class=n >results</span><span class=p >[</span><span class=sa >f</span><span class=s2 >"ex11_share_</span><span class=si >{</span><span class=n >g</span><span class=si >}</span><span class=s2 >_w_degrees"</span><span class=p >]</span> <span class=o >=</span> <span class=n >tab</span><span class=o >.</span><span class=n >loc</span><span class=p >[</span><span class=kc >True</span><span class=p >,</span> <span class=n >g</span><span class=p >]</span>
    <span class=nb >print</span><span class=p >(</span>
        <span class=sa >f</span><span class=s2 >"The share of </span><span class=si >{</span><span class=n >g</span><span class=si >}</span><span class=s2 >s with college degrees is "</span>
        <span class=sa >f</span><span class=s2 >"</span><span class=si >{</span><span class=n >results</span><span class=p >[</span><span class=sa >f</span><span class=s1 >'ex11_share_</span><span class=si >{</span><span class=n >g</span><span class=si >}</span><span class=s1 >_w_degrees'</span><span class=p >]</span><span class=si >:</span><span class=s2 >.3f</span><span class=si >}</span><span class=s2 >"</span>
    <span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
The share of males with college degrees is 0.297
The share of females with college degrees is 0.312
</pre></div></div> </div> </section> <section id=Exercise-12 > <h3 id=Exercise-12 >Exercise 12<a class=headerlink  href="#Exercise-12" title="Permalink to this headline">¶</a></h3> <p>Now, let’s recreate that table for people who are 40 and over and people under 40. Over time, what does this suggest about the absolute difference in the share of men and women earning college degrees? Has it gotten larger, stayed the same, or gotten smaller? Store your answer (either <code class="docutils literal notranslate"><span class=pre >"the</span> <span class=pre >absolute</span> <span class=pre >difference</span> <span class=pre >has</span> <span class=pre >increased"</span></code> or <code class="docutils literal notranslate"><span class=pre >"the</span> <span class=pre >absolute</span> <span class=pre >difference</span> <span class=pre >has</span> <span class=pre >decreased"</span></code>) in <code class="docutils literal notranslate"><span class=pre >"ex12_comparing"</span></code>.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[22]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >older</span> <span class=o >=</span> <span class=n >acs</span><span class=p >[</span><span class=mi >40</span> <span class=o >&lt;=</span> <span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]]</span>
<span class=n >older_table</span> <span class=o >=</span> <span class=n >pd</span><span class=o >.</span><span class=n >crosstab</span><span class=p >(</span><span class=n >older</span><span class=p >[</span><span class=s2 >"college_degree"</span><span class=p >],</span> <span class=n >older</span><span class=p >[</span><span class=s2 >"sex"</span><span class=p >],</span> <span class=n >normalize</span><span class=o >=</span><span class=s2 >"columns"</span><span class=p >)</span>
<span class=n >older_table</span>
<br/></pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[22]:
</pre></div> </div> <div class="output_area rendered_html docutils container"> <div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border=1  class=dataframe > <thead> <tr style="text-align: right;"> <th>sex <th>male <th>female <tr> <th>college_degree <th> <th> <tr> <th>False <td>0.682123 <td>0.699144 <tr> <th>True <td>0.317877 <td>0.300856 </table> </div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[23]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >older_gap</span> <span class=o >=</span> <span class=n >older_table</span><span class=o >.</span><span class=n >loc</span><span class=p >[</span><span class=kc >True</span><span class=p >,</span> <span class=s2 >"male"</span><span class=p >]</span> <span class=o >-</span> <span class=n >tab</span><span class=o >.</span><span class=n >loc</span><span class=p >[</span><span class=kc >True</span><span class=p >,</span> <span class=s2 >"female"</span><span class=p >]</span>
<span class=nb >print</span><span class=p >(</span>
    <span class=sa >f</span><span class=s2 >"the gap between men and women's college attainment"</span>
    <span class=sa >f</span><span class=s2 >" for those OVER 40 is </span><span class=si >{</span><span class=n >older_gap</span><span class=si >:</span><span class=s2 >.3f</span><span class=si >}</span><span class=s2 >"</span>
<span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
the gap between men and women's college attainment for those OVER 40 is 0.006
</pre></div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[24]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >younger</span> <span class=o >=</span> <span class=n >acs</span><span class=p >[</span><span class=n >acs</span><span class=p >[</span><span class=s2 >"age"</span><span class=p >]</span> <span class=o >&lt;</span> <span class=mi >40</span><span class=p >]</span>
<span class=n >younger_table</span> <span class=o >=</span> <span class=n >pd</span><span class=o >.</span><span class=n >crosstab</span><span class=p >(</span>
    <span class=n >younger</span><span class=p >[</span><span class=s2 >"college_degree"</span><span class=p >],</span> <span class=n >younger</span><span class=p >[</span><span class=s2 >"sex"</span><span class=p >],</span> <span class=n >normalize</span><span class=o >=</span><span class=s2 >"columns"</span>
<span class=p >)</span>
<span class=n >tab</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[24]:
</pre></div> </div> <div class="output_area rendered_html docutils container"> <div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border=1  class=dataframe > <thead> <tr style="text-align: right;"> <th>sex <th>male <th>female <tr> <th>college_degree <th> <th> <tr> <th>False <td>0.703439 <td>0.688381 <tr> <th>True <td>0.296561 <td>0.311619 </table> </div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[25]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >younger_gap</span> <span class=o >=</span> <span class=n >tab</span><span class=o >.</span><span class=n >loc</span><span class=p >[</span><span class=kc >True</span><span class=p >,</span> <span class=s2 >"male"</span><span class=p >]</span> <span class=o >-</span> <span class=n >tab</span><span class=o >.</span><span class=n >loc</span><span class=p >[</span><span class=kc >True</span><span class=p >,</span> <span class=s2 >"female"</span><span class=p >]</span>
<span class=nb >print</span><span class=p >(</span>
    <span class=sa >f</span><span class=s2 >"the gap between men and women's college attainment"</span>
    <span class=sa >f</span><span class=s2 >" for those UNDER 40 is </span><span class=si >{</span><span class=n >younger_gap</span><span class=si >:</span><span class=s2 >.3f</span><span class=si >}</span><span class=s2 >"</span>
<span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
the gap between men and women's college attainment for those UNDER 40 is -0.015
</pre></div></div> </div> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[26]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=nb >print</span><span class=p >(</span>
    <span class=sa >f</span><span class=s2 >"The male-female gap has gone from </span><span class=si >{</span><span class=n >older_gap</span><span class=si >:</span><span class=s2 >.3f</span><span class=si >}</span><span class=s2 > to </span><span class=si >{</span><span class=n >younger_gap</span><span class=si >:</span><span class=s2 >.3f</span><span class=si >}</span><span class=s2 >. "</span>
    <span class=sa >f</span><span class=s2 >"Thus the absolute change from older to younger cohorts is </span><span class=si >{</span><span class=n >np</span><span class=o >.</span><span class=n >abs</span><span class=p >(</span><span class=n >younger_gap</span><span class=p >)</span><span class=w > </span><span class=o >-</span><span class=w > </span><span class=n >np</span><span class=o >.</span><span class=n >abs</span><span class=p >(</span><span class=n >older_gap</span><span class=p >)</span><span class=si >:</span><span class=s2 >.3f</span><span class=si >}</span><span class=s2 >."</span>
<span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
The male-female gap has gone from 0.006 to -0.015. Thus the absolute change from older to younger cohorts is 0.009.
</pre></div></div> </div> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[27]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >results</span><span class=p >[</span><span class=s2 >"ex12_comparing"</span><span class=p >]</span> <span class=o >=</span> <span class=s2 >"the absolute difference has increased"</span>
<br/></pre></div> </div> </div> </section> </section> <section id=Exercise-13 > <h2 id=Exercise-13 >Exercise 13<a class=headerlink  href="#Exercise-13" title="Permalink to this headline">¶</a></h2> <p>In words, what is causing the change noted in Exercise 12 (i.e., looking at the tables above, tell me a story about Men and Women’s College attainment).</p> <blockquote> <div><p>While a larger proportion of men than women have a college degree in the older cohort, that relationship is flipped for younger Americans; among those under 40, a larger share of adult women have college degrees then men.</p> <p>Interestingly, this appears to be the result of <em>both</em> an increasing share of women getting college degrees <em>and</em> a decreasing share of men getting college degrees:</p> </div></blockquote> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[28]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=nb >print</span><span class=p >(</span>
    <span class=sa >f</span><span class=s2 >"Among older Americans, </span><span class=si >{</span><span class=n >older_table</span><span class=o >.</span><span class=n >loc</span><span class=p >[</span><span class=kc >True</span><span class=p >,</span><span class=w > </span><span class=s1 >'male'</span><span class=p >]</span><span class=si >:</span><span class=s2 >.1%</span><span class=si >}</span><span class=s2 > of "</span>
    <span class=sa >f</span><span class=s2 >"men have college degrees; among younger men, this number has "</span>
    <span class=sa >f</span><span class=s2 >"fallen to </span><span class=si >{</span><span class=n >younger_table</span><span class=o >.</span><span class=n >loc</span><span class=p >[</span><span class=kc >True</span><span class=p >,</span><span class=w > </span><span class=s1 >'male'</span><span class=p >]</span><span class=si >:</span><span class=s2 >.1%</span><span class=si >}</span><span class=s2 >."</span>
<span class=p >)</span>

<span class=nb >print</span><span class=p >(</span>
    <span class=sa >f</span><span class=s2 >"By contrast, among older Americans </span><span class=si >{</span><span class=n >older_table</span><span class=o >.</span><span class=n >loc</span><span class=p >[</span><span class=kc >True</span><span class=p >,</span><span class=w > </span><span class=s1 >'female'</span><span class=p >]</span><span class=si >:</span><span class=s2 >.1%</span><span class=si >}</span><span class=s2 > of "</span>
    <span class=sa >f</span><span class=s2 >"women have college degrees; among younger women, this number has "</span>
    <span class=sa >f</span><span class=s2 >"risen to </span><span class=si >{</span><span class=n >younger_table</span><span class=o >.</span><span class=n >loc</span><span class=p >[</span><span class=kc >True</span><span class=p >,</span><span class=w > </span><span class=s1 >'female'</span><span class=p >]</span><span class=si >:</span><span class=s2 >.1%</span><span class=si >}</span><span class=s2 >."</span>
<span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
Among older Americans, 31.8% of men have college degrees; among younger men, this number has fallen to 25.7%.
By contrast, among older Americans 30.1% of women have college degrees; among younger women, this number has risen to 33.4%.
</pre></div></div> </div> </section> <section id="Want-More-Practice?"> <h2 id="Want-More-Practice?">Want More Practice?<a class=headerlink  href="#Want-More-Practice?" title="Permalink to this headline">¶</a></h2> <p>Calculate the educational racial gap in the United States for White Americans, Black Americans, Hispanic Americans, and other groups.</p> <p>Note that to do these calculations, you’ll have to deal with the fact that unlike most Americans, the American Census Bureau treats “Hispanic” not as a racial category, but a linguistic one. As a result, the racial category “White” in <code class="docutils literal notranslate"><span class=pre >race</span></code> actually includes most Hispanic Americans. For this analysis, we wish to work with the mutually exclusive categories of “White, non-Hispanic”, “White, Hispanic”, “Black (Hispanic or non-Hispanic)”, and a category for everyone else.</p> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[29]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=k >assert</span> <span class=nb >set</span><span class=p >(</span><span class=n >results</span><span class=o >.</span><span class=n >keys</span><span class=p >())</span> <span class=o >==</span> <span class=p >{</span>
    <span class=s2 >"ex5_age_young"</span><span class=p >,</span>
    <span class=s2 >"ex5_age_old"</span><span class=p >,</span>
    <span class=s2 >"ex7_avg_age"</span><span class=p >,</span>
    <span class=s2 >"ex8_avg_age"</span><span class=p >,</span>
    <span class=s2 >"ex9_num_college"</span><span class=p >,</span>
    <span class=s2 >"ex11_share_male_w_degrees"</span><span class=p >,</span>
    <span class=s2 >"ex11_share_female_w_degrees"</span><span class=p >,</span>
    <span class=s2 >"ex12_comparing"</span><span class=p >,</span>
<span class=p >}</span>
</pre></div> </div> </div> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[30]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=kn >import</span> <span class=nn >json</span>

<span class=k >for</span> <span class=n >k</span> <span class=ow >in</span> <span class=n >results</span><span class=o >.</span><span class=n >keys</span><span class=p >():</span>
    <span class=k >if</span> <span class=ow >not</span> <span class=nb >isinstance</span><span class=p >(</span><span class=n >results</span><span class=p >[</span><span class=n >k</span><span class=p >],</span> <span class=nb >str</span><span class=p >):</span>
        <span class=n >results</span><span class=p >[</span><span class=n >k</span><span class=p >]</span> <span class=o >=</span> <span class=nb >float</span><span class=p >(</span><span class=n >results</span><span class=p >[</span><span class=n >k</span><span class=p >])</span>

<span class=k >with</span> <span class=nb >open</span><span class=p >(</span><span class=s2 >"autograder/solutions.json"</span><span class=p >,</span> <span class=s2 >"w"</span><span class=p >)</span> <span class=k >as</span> <span class=n >outfile</span><span class=p >:</span>
    <span class=n >json</span><span class=o >.</span><span class=n >dump</span><span class=p >(</span><span class=n >results</span><span class=p >,</span> <span class=n >outfile</span><span class=p >)</span>
<br/></pre></div> </div> </div> </section> </section> </article> </div> </div> </main> </div> <footer class=md-footer > <div class=md-footer-nav > <nav class="md-footer-nav__inner md-grid"> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright > <div class=md-footer-copyright__highlight > &#169; Copyright 2021, Nick Eubank. </div> Created using <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.5.0. and <a href="https://github.com/bashtage/sphinx-material/">Material for Sphinx</a> </div> </div> </div> </footer> <script src="../_static/javascripts/application.js"></script> <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>